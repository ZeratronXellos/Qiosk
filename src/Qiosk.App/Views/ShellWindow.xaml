<Window x:Class="Qiosk.App.Views.ShellWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:infra="clr-namespace:Qiosk.App.Infrastructure"
        mc:Ignorable="d"
        Title="Qiosk"
        WindowStyle="None"
        WindowState="Maximized"
        ResizeMode="NoResize"
        Background="{StaticResource SurfaceBrush}"
        Loaded="OnLoaded"
        Closing="OnClosing">
    <Window.InputBindings>
        <KeyBinding Key="Q" Modifiers="Control" Command="{Binding ExitApplicationCommand}" />
        <KeyBinding Key="R" Modifiers="Control" Command="{Binding ReloadExcelCommand}" />
    </Window.InputBindings>
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
        <infra:InverseBooleanToVisibilityConverter x:Key="InverseBoolToVisibility" />
    </Window.Resources>
    <Grid>
        <Image Source="{Binding CameraFrame}"
               Stretch="UniformToFill"
               Opacity="0.9" />

        <Border Background="#AA000000" HorizontalAlignment="Left" Width="420" Margin="40">
            <StackPanel Margin="20">
                <TextBlock Text="Bine ai venit!" FontSize="36" FontWeight="Bold" Margin="0,0,0,10" />
                <TextBlock Text="Apropie codul QR de camera pentru a-ti genera ecusonul." TextWrapping="Wrap" FontSize="18" />
                <Separator Margin="0,20,0,20" />
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Ellipse Width="14" Height="14" Fill="{StaticResource AccentBrush}" VerticalAlignment="Center" />
                    <TextBlock Text="  Scanner activ" FontSize="16" Margin="6,0,0,0" />
                </StackPanel>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,10,0,0">
                    <Ellipse Width="14" Height="14" Fill="#55FFFFFF" VerticalAlignment="Center" />
                    <TextBlock Text="  Confirmarea este necesara inainte de imprimare." FontSize="16" Margin="6,0,0,0" TextWrapping="Wrap" />
                </StackPanel>
            </StackPanel>
        </Border>

        <Border Background="#CC1E1E1E"
                CornerRadius="16"
                Padding="30"
                Width="550"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="{Binding IsConfirmationVisible, Converter={StaticResource BoolToVisibility}}">
            <StackPanel>
                <TextBlock Text="Verifica datele" FontSize="32" FontWeight="Bold" Margin="0,0,0,10" />
                <TextBlock Text="Confirma informatiile de mai jos pentru tiparirea ecusonului." TextWrapping="Wrap" FontSize="18" Margin="0,0,0,20" />

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Nume" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                    <TextBlock Text="{Binding CurrentAttendee.FullName}" FontSize="26" FontWeight="SemiBold" />
                </StackPanel>
                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Rol" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                    <TextBlock Text="{Binding CurrentAttendee.Role}" FontSize="22" />
                </StackPanel>
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="Companie" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                    <TextBlock Text="{Binding CurrentAttendee.Company}" FontSize="22" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Nu sunt eu" Command="{Binding CancelCurrentCommand}" Margin="0,0,10,0" Background="#252525" />
                    <Button Content="Confirma" IsDefault="True" Command="{Binding ConfirmCurrentCommand}" />
                </StackPanel>
            </StackPanel>
        </Border>

        <Border Background="#CC1E1E1E"
                CornerRadius="16"
                Padding="30"
                Width="450"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="{Binding IsPrintingVisible, Converter={StaticResource BoolToVisibility}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="Se printeaza ecusonul" FontSize="30" FontWeight="Bold" HorizontalAlignment="Center" />
                <TextBlock Text="Te rugam asteapta cateva secunde." FontSize="18" Margin="0,12,0,0" HorizontalAlignment="Center" />
            </StackPanel>
        </Border>

        <Border Background="#AA000000"
                Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibility}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="Se incarca datele..." FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,10" />
                <ProgressBar Width="280" Height="10" IsIndeterminate="True" />
            </StackPanel>
        </Border>

        <Border CornerRadius="8"
                Padding="14"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Margin="0,0,0,40"
                Visibility="{Binding IsStatusVisible, Converter={StaticResource BoolToVisibility}}">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Background" Value="#DD1E1E1E" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsStatusError}" Value="True">
                            <Setter Property="Background" Value="#DDB00020" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <TextBlock Text="{Binding StatusMessage}" FontSize="18">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Foreground" Value="White" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsStatusError}" Value="True">
                            <Setter Property="Foreground" Value="#FFFFCDD2" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
        </Border>

        <Button Content="Admin" Width="120" Height="40" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="40" Command="{Binding OpenAdminCommand}" />        <Border Background="#D9000000"
                Visibility="{Binding IsAdminVisible, Converter={StaticResource BoolToVisibility}}">
            <Border CornerRadius="12"
                    Background="#202020"
                    Padding="30"
                    Width="680"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <Grid>
                    <Grid Visibility="{Binding IsAdminAuthenticated, Converter={StaticResource InverseBoolToVisibility}}">
                        <StackPanel>
                            <TextBlock Text="Autentificare administrator" FontSize="30" FontWeight="Bold" Margin="0,0,0,20" />
                            <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                                <TextBlock Text="Utilizator" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                                <TextBox Text="{Binding AdminUserInput, UpdateSourceTrigger=PropertyChanged}" />
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Margin="0,0,0,20">
                                <TextBlock Text="Parola" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                                <PasswordBox x:Name="AdminPasswordBox" PasswordChanged="AdminPasswordBox_OnPasswordChanged" />
                            </StackPanel>
                            <TextBlock Text="{Binding AdminErrorMessage}" Foreground="#FFEF5350" FontSize="14" Margin="0,0,0,10" />
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="Anuleaza" Command="{Binding CloseAdminCommand}" Background="#353535" Margin="0,0,10,0" />
                                <Button Content="Autentificare" Command="{Binding AuthenticateAdminCommand}" />
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                    <Grid Visibility="{Binding IsAdminAuthenticated, Converter={StaticResource BoolToVisibility}}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Setari kiosk" FontSize="30" FontWeight="Bold" Grid.Column="0" VerticalAlignment="Center" />
                            <Button Content="Delogare" Command="{Binding CloseAdminCommand}" Background="#353535" Grid.Column="1" Margin="20,0,0,0" />
                        </Grid>
                        <Grid Grid.Row="1" Margin="0,20,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                <TextBlock Text="Camera" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                                <ComboBox ItemsSource="{Binding Cameras}" SelectedItem="{Binding SelectedCamera}" DisplayMemberPath="Name" />
                                <TextBlock Text="Imprimanta" Margin="0,20,0,0" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                                <ComboBox ItemsSource="{Binding Printers}" SelectedItem="{Binding SelectedPrinter}" />
                                <CheckBox Content="Mod blocare kiosk" IsChecked="{Binding IsLockMode}" Margin="0,20,0,0" FontSize="16" />
                            </StackPanel>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Fisier Excel participanti" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                                <DockPanel>
                                    <TextBox Text="{Binding ExcelPathInput, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,10,0" />
                                    <Button Content="Browse" Width="90" Command="{Binding BrowseExcelCommand}" />
                                </DockPanel>
                                <TextBlock Text="Sablon DOCX ecuson" Margin="0,20,0,0" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" />
                                <DockPanel>
                                    <TextBox Text="{Binding TemplatePathInput, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,10,0" />
                                    <Button Content="Browse" Width="90" Command="{Binding BrowseTemplateCommand}" />
                                </DockPanel>
                                <Button Content="Salveaza" Margin="0,20,0,0" Command="{Binding SaveAdminSettingsCommand}" />
                            </StackPanel>
                        </Grid>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Reload Excel" Command="{Binding ReloadExcelCommand}" Background="#353535" Margin="0,0,10,0" />
                            <Button Content="Inchide" Command="{Binding CloseAdminCommand}" />
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Border>
    </Grid>
</Window>





